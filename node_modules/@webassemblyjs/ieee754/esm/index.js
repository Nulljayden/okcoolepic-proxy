import { writeFloat, readFloat } from "ieee754";

export const NUMBER_OF_BYTE_F32 = 4;
export const NUMBER_OF_BYTE_F64 = 8;
export const SINGLE_PRECISION_MANTISSA = 23;
export const DOUBLE_PRECISION_MANTISSA = 52;

export function encodeF32(value) {
  const buffer = Buffer.alloc(NUMBER_OF_BYTE_F32);
  writeFloat(buffer, value, 0, SINGLE_PRECISION_MANTISSA, true);
  return buffer;
}

export function encodeF64(value) {
  const buffer = Buffer.alloc(NUMBER_OF_BYTE_F64);
  writeFloat(buffer, value, 0, DOUBLE_PRECISION_MANTISSA, true);
  return buffer;
}

export function decodeF32(buffer) {
  return readFloat(buffer, 0, true, SINGLE_PRECISION_MANTISSA);
}

export function decodeF64(buffer) {
  return readFloat(buffer, 0, true, DOUBLE_PRECISION_MANTISSA);
}
